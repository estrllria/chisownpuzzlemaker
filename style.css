:root{
  --paper:#fff8fb;
  --ink:#3a2b2f;
  --muted:#7a5b64;
  --line:rgba(60,40,50,.14);
  --shadow: 0 18px 40px rgba(40,20,30,.12);
  --pink:#ff6b9a;
  --pink2:#ffb3c7;
  --white:rgba(255,255,255,.88);
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  color:var(--ink);
  background:
    radial-gradient(1200px 700px at 20% 0%, rgba(255,107,154,.16), transparent 55%),
    radial-gradient(900px 650px at 85% 12%, rgba(255,179,199,.18), transparent 60%),
    var(--paper);
}

.page{max-width:1100px;margin:0 auto;padding:18px 16px 34px; position:relative; overflow:hidden}

.heartsBg{
  position:absolute; inset:-40px;
  pointer-events:none;
  background-image:
    radial-gradient(circle at 15% 25%, rgba(255,107,154,.35) 0 3px, transparent 4px),
    radial-gradient(circle at 20% 15%, rgba(255,179,199,.55) 0 4px, transparent 5px),
    radial-gradient(circle at 80% 20%, rgba(255,107,154,.30) 0 3px, transparent 4px),
    radial-gradient(circle at 72% 34%, rgba(255,179,199,.45) 0 4px, transparent 5px),
    radial-gradient(circle at 30% 82%, rgba(255,107,154,.25) 0 3px, transparent 4px),
    radial-gradient(circle at 85% 78%, rgba(255,179,199,.40) 0 4px, transparent 5px);
  opacity:.7;
}

/* header */
.hero{
  display:flex; align-items:flex-end; justify-content:space-between; gap:12px;
  padding:14px 14px 12px;
}
.kicker{font-size:14px; color:var(--muted); font-weight:900; letter-spacing:.2px}
.heroText h1{margin:2px 0 2px; font-size:28px}
.heroText p{margin:4px 0 0; color:var(--muted); font-size:13.5px}

.heroBtns{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:flex-end}
.pill{
  border:1px solid rgba(255,107,154,.30);
  background: rgba(255,255,255,.86);
  color:var(--ink);
  padding:10px 12px;
  border-radius:999px;
  cursor:pointer;
  font-weight:1000;
  font-size:13px;
  box-shadow: 0 12px 24px rgba(40,20,30,.08);
  user-select:none;
  -webkit-tap-highlight-color: transparent;
}
.pill.ghost{border:1px solid rgba(60,40,50,.14); background: rgba(255,255,255,.65)}
.selectPill{gap:8px; display:flex; align-items:center}
.selectPill span{color:var(--muted); font-weight:1000; font-size:12px}
select{border:none;background:transparent;font-weight:1000;color:var(--ink);outline:none}

/* layout */
.layout{
  display:grid;
  grid-template-columns: 1.2fr .8fr;
  gap:18px;
  align-items:start;
}
@media (max-width: 940px){ .layout{grid-template-columns:1fr} }

/* board */
.boardFrame{
  background: rgba(255,255,255,.76);
  border:1px solid rgba(60,40,50,.12);
  border-radius:18px;
  box-shadow: var(--shadow);
  padding:14px;
}
.board{
  width:100%;
  aspect-ratio: 1/1;
  border-radius:14px;
  background: #fff;
  border:1px solid rgba(60,40,50,.10);
  display:grid;
  gap:10px;
  padding:14px;
  position:relative;
}
.slot{
  border-radius:18px;
  background: rgba(255,255,255,.95);
  border:2px dashed rgba(60,40,50,.18);
  position:relative;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}
.slot.filled{
  border-style: solid;
  border-color: rgba(255,107,154,.22);
  box-shadow: 0 0 0 3px rgba(255,107,154,.08) inset;
}
.slot.hover{
  border-color: rgba(255,107,154,.45);
  box-shadow: 0 0 0 5px rgba(255,107,154,.12) inset;
}

/* side */
.side{display:flex; flex-direction:column; gap:14px}

/* polaroid */
.polaroid{
  background: var(--white);
  border:1px solid rgba(60,40,50,.12);
  border-radius:18px;
  box-shadow: var(--shadow);
  padding:12px;
}
.polTitle{font-weight:1000; color:var(--muted); font-size:13px; margin:2px 2px 10px}
.polPhoto{
  background:#fff;
  border:1px solid rgba(60,40,50,.10);
  border-radius:14px;
  padding:10px;
}
.polPhoto img{
  width:100%;
  aspect-ratio: 4 / 3;
  object-fit: cover;
  border-radius:12px;
  display:block;
  background:#f5eef2;
}
.polCaption{margin-top:10px; padding:6px 8px 2px; font-size:13.5px; line-height:1.4}

/* tray */
.trayCard{
  background: var(--white);
  border:1px solid rgba(60,40,50,.12);
  border-radius:18px;
  box-shadow: var(--shadow);
  padding:12px;
}
.trayTitle{font-weight:1000; color:var(--muted); font-size:13px; margin:2px 2px 10px}
.tray{
  display:grid;
  gap:12px;
  grid-template-columns: repeat(4, 1fr);
  position:relative;
}
@media (max-width: 420px){ .tray{grid-template-columns: repeat(3, 1fr)} }

/* piece */
.piece{
  width:100%;
  aspect-ratio: 1 / 1;
  border-radius:14px;
  user-select:none;
  filter: drop-shadow(0 10px 12px rgba(40,20,30,.10));
  position:relative;
  touch-action:none; /* IMPORTANT for iPad drag */
  cursor:grab;
}
.piece:active{cursor:grabbing}
.piece svg{width:100%; height:100%; display:block}

/* during drag (floating) */
.dragLayer{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index: 999997;
}
.dragging{
  position:fixed !important;
  z-index: 999998 !important;
  pointer-events:none !important;
  transform: translate(-50%, -50%);
}

/* footer */
.foot{margin-top:14px;text-align:center;color:rgba(58,43,47,.55);font-size:12px}

/* confetti hearts */
.confetti{position:fixed; inset:0; pointer-events:none; z-index: 999998;}
.confetti .h{
  position:absolute;
  font-size:18px;
  opacity:.95;
  animation: floatUp 1400ms ease-out forwards;
  filter: drop-shadow(0 8px 10px rgba(40,20,30,.12));
}
@keyframes floatUp{
  from{ transform: translate(-50%,-50%) translateY(0) scale(1); opacity: .95; }
  to{ transform: translate(-50%,-50%) translateY(-140px) scale(1.15); opacity: 0; }
}

/* reveal overlay */
#reveal[hidden]{display:none !important;}
.reveal{
  position:fixed; inset:0;
  display:flex; align-items:center; justify-content:center;
  background: rgba(255,248,251,.65);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: 999999;
}
.revealCard{
  width:min(420px, 92vw);
  background: rgba(255,255,255,.90);
  border:1px solid rgba(60,40,50,.12);
  border-radius:18px;
  box-shadow: var(--shadow);
  padding:16px;
  text-align:center;
}
.spark{font-size:28px;margin-bottom:6px}
.revealCard h3{margin:6px 0 6px; text-transform:lowercase}
.msg{margin:0 0 12px; line-height:1.35}
#customMsg{font-weight:1000}
#again:active{transform:scale(.97)}